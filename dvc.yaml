stages:
  featurize:
    cmd: python data_preparation.py
    deps:
    - data
    - data_preparation.py
    outs:
    - bottleneck_features_train.npy
    - bottleneck_features_validation.npy
  train:
    cmd: python train.py
    deps:
    - bottleneck_features_train.npy
    - bottleneck_features_validation.npy
    - train.py
    outs:
    - metrics.csv
    - model.h5
  evaluate:
    cmd: python evaluate.py
    deps:
    - metrics.csv
    metrics:
    - metrics.json:
        cache: false
